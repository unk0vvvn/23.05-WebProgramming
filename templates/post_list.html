{% extends "layout.html" %}
{% block content %}
<section class="my-3 text-center">
    <h4 class="text-center py-3 text-decoration-underline">Community</h4>
    <div class="row my-3">
		<div class="col-1">
			<a class="btn btn-primary" href="{{url_for('post_write')}}">글쓰기</a>
		</div>
		
		<!-- TODO: 검색 기능
            <div class="col-6">
		
			<form class="input-group" th:action="@{/question/list}" method="get">
				<input name="kw" type="text" class="form-control" th:value="${kw}">
				<button class="btn btn-outline-secondary" type="submit">찾기</button>
			</form>
		</div> -->
	</div>

    <table class="table">
        <thead class="table-dark">
            <tr class="text-center">
                <th>번호</th>
                <th style="width:50%">제목</th>
                <th>글쓴이</th>
                <th>작성일시</th>
                <th>조회수</th>
            </tr>
        </thead>
        <tbody>
            {% for post in posts %}
            <tr class="text-center">
                <td>{{post_count - (page - 1) * loop.length - (loop.index-1)}}</td> 

                <td class="text-start">
                    <a href = "{{ url_for('post_detail', id=post._id) }}">{{post.title}}</a>
                    <!-- <span class="text-danger small ms-2" th:if="${question.answerCount > 0}" 
                    th:text="${question.answerCount}"></span> 댓글 구현-->
                </td>
                
                <td>
                    <span>{{post.author}}</span>
                </td>
                 
                <td>{{post.create_date}}</td>
                
                <td>0</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- 페이징 처리 시작 -->
	{# <div>
		<ul class="pagination justify-content-center">
			<li class="page-item">
				<a class="page-link" href="{{url_for('post_list')}}"> 
				처음
				</a>
			</li>
			<li th:each="page: ${numbers.sequence(0, paging.totalPages-1)}"
				th:classappend="${page == paging.number} ? 'active'" 
				th:if="${page >= paging.number-5 && page <= paging.number+5 && page < paging.totalPages}"
				class="page-item">
				<a class="page-link" th:text="${page}" th:href="@{/question/list(page=${page}, kw=${kw})}"></a>
			</li>
			
			<li class="page-item">
				<a class="page-link" href="{{url_for('post_list', page=post_count/(posts|count))}}"> 
					마지막
				</a>
			</li>
		</ul>
	</div> #}
	<!-- 페이징 처리 끝 -->
</section>
{% endblock %}